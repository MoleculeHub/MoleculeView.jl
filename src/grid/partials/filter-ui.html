<div class="range-selection" id="filterSelection" style="display: none;">
    <!-- Active Filters Display -->
    <div id="activeFiltersDisplay" style="margin-bottom: 15px;">
        <label class="range-label">Active Filters:</label>
        <div id="activeFiltersList" style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px; min-height: 30px; border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; padding: 8px; background: rgba(255,255,255,0.05);">
            <span id="noFiltersText" style="color: rgba(255,255,255,0.6); font-style: italic;">No active filters</span>
        </div>
    </div>

    <!-- Add New Filter Section -->
    <div style="border-top: 1px solid rgba(255,255,255,0.2); padding-top: 15px;">
        <label class="range-label">Add New Filter:</label>
        <div style="display: flex; gap: 20px; margin-top: 10px; align-items: flex-start; flex-wrap: wrap; justify-content: center;">

            <!-- Range Filter Section -->
            <div style="display: flex; flex-direction: column; gap: 8px; min-width: 350px; padding: 15px; border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; background: rgba(255,255,255,0.05);">
                <label class="range-label" style="font-size: 12px; margin-bottom: 5px;">Numerical Filter:</label>
                <select class="range-property-select" id="rangePropertySelect" style="margin-bottom: 10px; width: 100%; min-width: 200px;">
                    <option value="">Choose property...</option>
                </select>
                <div style="display: flex; gap: 8px; align-items: center; flex-wrap: wrap;">
                    <input type="number" class="range-input" id="rangeMin" placeholder="Min" step="any" style="flex: 1; min-width: 120px;">
                    <span class="range-label" style="font-size: 12px; flex-shrink: 0;">to</span>
                    <input type="number" class="range-input" id="rangeMax" placeholder="Max" step="any" style="flex: 1; min-width: 120px;">
                    <button class="control-btn" id="addRangeFilterBtn" style="padding: 6px 12px; font-size: 12px; flex-shrink: 0;">Add</button>
                </div>
            </div>

            <!-- Categorical Filter Section -->
            <div style="display: flex; flex-direction: column; gap: 8px; min-width: 350px; padding: 15px; border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; background: rgba(255,255,255,0.05);">
                <label class="range-label" style="font-size: 12px; margin-bottom: 5px;">Categorical Filter:</label>
                <select class="range-property-select" id="categoricalPropertySelect" style="margin-bottom: 8px; width: 100%; min-width: 200px;">
                    <option value="">Choose property...</option>
                </select>
                <div id="categoricalValuesContainer" style="max-height: 150px; overflow-y: auto; border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; padding: 8px; background: rgba(255,255,255,0.05); margin-bottom: 8px;">
                    <div id="categoricalSearch" style="margin-bottom: 6px;">
                        <input type="text" id="categorySearchInput" placeholder="Search categories..." style="width: 100%; padding: 4px 8px; border: none; border-radius: 3px; font-size: 11px;">
                    </div>
                    <div id="categoricalValues" style="display: flex; flex-direction: column; gap: 2px; max-height: 100px; overflow-y: auto;">
                        <!-- Categorical checkboxes will be populated here -->
                    </div>
                </div>
                <button class="control-btn" id="addCategoricalFilterBtn" style="padding: 6px 12px; font-size: 12px; width: 100%;">Add</button>
            </div>
        </div>
    </div>

    <div style="display: flex; gap: 10px; margin-top: 15px; justify-content: center; border-top: 1px solid rgba(255,255,255,0.2); padding-top: 15px;">
        <button class="control-btn secondary" id="clearAllFiltersBtn">Clear All Filters</button>
    </div>
</div>